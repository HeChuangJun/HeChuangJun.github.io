import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as e,c as s,e as l}from"./app-7KT7HDzT.js";const d={},a=l(`<ul><li><a href="#1-nosql%E4%BB%8B%E7%BB%8D">1. NoSQL介绍</a></li><li><a href="#2-nosql%E4%BA%A7%E7%94%9F%E5%8E%9F%E5%9B%A0">2. NoSQL产生原因</a></li><li><a href="#3-nosql%E7%9A%84%E7%89%B9%E7%82%B9">3. NoSQL的特点</a></li><li><a href="#4-redis%E4%BB%8B%E7%BB%8D">4. redis介绍</a></li><li><a href="#5-redis%E6%95%B0%E6%8D%AE%E5%BA%93">5. Redis数据库</a></li><li><a href="#6-%E6%B6%88%E6%81%AF%E8%AE%A2%E9%98%85%E4%B8%8E%E5%8F%91%E5%B8%83">6. 消息订阅与发布</a></li><li><a href="#7-%E4%BA%8B%E5%8A%A1">7. 事务</a></li><li><a href="#8-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%90%AF%E5%8A%A8">8. 安装与启动</a></li><li><a href="#9-jedis%E7%9A%84%E6%93%8D%E4%BD%9C">9. jedis的操作</a></li><li><a href="#10-redis%E5%8D%95%E6%9C%BA%E5%AE%89%E8%A3%85">10. redis单机安装</a></li><li><a href="#11-redis%E9%9B%86%E7%BE%A4%E7%9A%84%E6%90%AD%E5%BB%BA">11. Redis集群的搭建</a></li><li><a href="#12-java%E8%BF%9E%E6%8E%A5%E5%88%99%E7%94%A8jedis">12. java连接则用jedis</a></li></ul><h1 id="_1-nosql介绍" tabindex="-1"><a class="header-anchor" href="#_1-nosql介绍"><span>1. NoSQL介绍</span></a></h1><ul><li>关系型数据库是基于关系表的数据库，最终会将数据持久化到磁盘上</li><li>nosql数据库是基于特殊的结构，并将数据存储到内存的数据库</li><li>从性能上而言，nosql数据库要优于关系型数据库</li><li>从安全性上而言关系型数据库要优于nosql数据库</li><li>一个项目中nosql和关系型数据库会一起使用，达到性能和安全性的双保证</li></ul><h1 id="_2-nosql产生原因" tabindex="-1"><a class="header-anchor" href="#_2-nosql产生原因"><span>2. NoSQL产生原因</span></a></h1><ul><li>1.数据库高并发读写需求</li><li>2.海量数据高效率存储和访问</li><li>3.数据库高扩展性和高可用性</li></ul><h1 id="_3-nosql的特点" tabindex="-1"><a class="header-anchor" href="#_3-nosql的特点"><span>3. NoSQL的特点</span></a></h1><ul><li>易扩展、大数据量，高性能，灵活的数据模型,高可用</li></ul><h1 id="_4-redis介绍" tabindex="-1"><a class="header-anchor" href="#_4-redis介绍"><span>4. redis介绍</span></a></h1><ul><li>redis是一种高级的key-value的存储系统</li><li>Redis中所有的数据都是字符串。命令不区分大小写，key是区分大小写的。Redis是单线程的。Redis中不适合保存内容大的数据。</li></ul><h1 id="_5-redis数据库" tabindex="-1"><a class="header-anchor" href="#_5-redis数据库"><span>5. Redis数据库</span></a></h1><ul><li>多数据库</li><li>有0-15数据库，默认为0，选择数据库select n选择n号数据库</li><li>移库 move newkey n将当前的key移植到n号库中</li></ul><h1 id="_6-消息订阅与发布" tabindex="-1"><a class="header-anchor" href="#_6-消息订阅与发布"><span>6. 消息订阅与发布</span></a></h1><figure><img src="https://290ff162.telegraph-image-eg9.pages.dev/file/28327364030668f3c4d44.jpg" alt="消息的订阅与发布.JPG" tabindex="0"><figcaption>消息的订阅与发布.JPG</figcaption></figure><h1 id="_7-事务" tabindex="-1"><a class="header-anchor" href="#_7-事务"><span>7. 事务</span></a></h1><figure><img src="https://290ff162.telegraph-image-eg9.pages.dev/file/cc1727548496fd141234c.png" alt="redis事务.png" tabindex="0"><figcaption>redis事务.png</figcaption></figure><h1 id="_8-安装与启动" tabindex="-1"><a class="header-anchor" href="#_8-安装与启动"><span>8. 安装与启动</span></a></h1><ul><li>在redis的bin目录下可以执行./redis-server前端启动方式</li><li>在bin下执行命令,/redis-server redis.conf(后端启动)</li><li>关闭：关闭进程、在客户端下shutdown</li><li>连接redis redis-cli -h ip -p port</li></ul><h1 id="_9-jedis的操作" tabindex="-1"><a class="header-anchor" href="#_9-jedis的操作"><span>9. jedis的操作</span></a></h1><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>导包commons-pool2-2.3.jar\\jedis2.7.0jar

JedisConfig config=new JedisConfig()；
config.setMaxtotal(30);
config.setMaxIdle(10)
JedisPool pool = new JedisPool(JedisConfig,host,port);
Jedis jedis=null;
jedis=pool.getResource();
jedis.set(key,数据类型)
jedis.get(key,数据类型)

Jedis jedis = new Jedis(host,port);
jedis.set(key,数据类型)
jedis.get(key,数据类型)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_10-redis单机安装" tabindex="-1"><a class="header-anchor" href="#_10-redis单机安装"><span>10. redis单机安装</span></a></h1><ul><li><p>Redis是c语言开发的。</p></li><li><p>安装redis需要c语言的编译环境。如果没有gcc需要在线安装。yum install gcc-c++</p></li><li><p>安装步骤：</p><ul><li>1.redis的源码包上传到linux系统。</li><li>2.解压缩redis。</li><li>3.编译。进入redis源码目录。make</li><li>4.安装。make install PREFIX=/usr/local/redis PREFIX参数指定redis的安装目录。一般软件安装到/usr目录下</li><li>5.redis的启动： <ul><li>前端启动：在redis的安装目录下直接启动redis-server</li><li>[root@localhost bin]# ./redis-server</li><li>后台启动：把/root/redis-3.0.0/redis.conf复制到/usr/local/redis/bin目录下</li><li>[root@localhost redis-3.0.0]# cp redis.conf /usr/local/redis/bin/</li></ul></li><li>6.修改配置文件：daemonize no 为yes <ul><li>[root@localhost bin]# ./redis-server redis.conf</li></ul></li><li>查看redis进程：[root@localhost bin]# ps aux|grep redis</li></ul></li><li><p>redis-cli连接 : [root@localhost bin]# ./redis-cli 默认连接localhost运行在6379端口的redis服务。</p><ul><li>[root@localhost bin]# ./redis-cli -h 192.168.25.153 -p 6379<br> -h：连接的服务器的地址<br> -p：服务的端口号</li></ul></li><li><p>关闭redis：[root@localhost bin]# ./redis-cli shutdown</p></li><li><p>设置密码：config set requirepass pass_123456</p></li><li><p>获取密码：config get requirepass</p></li><li><p>登录：auth password</p></li></ul><h1 id="_11-redis集群的搭建" tabindex="-1"><a class="header-anchor" href="#_11-redis集群的搭建"><span>11. Redis集群的搭建</span></a></h1><ul><li><p>Redis集群中至少应该有三个节点。要保证集群的高可用，需要每个节点有一个备份机。</p><ul><li>Redis集群至少需要6台服务器。</li><li>搭建伪分布式。可以使用一台虚拟机运行6个redis实例。需要修改redis的端口号7001-7006</li></ul></li><li><p>集群搭建环境</p><ul><li><p>使用ruby脚本搭建集群。需要ruby的运行环境。</p><ul><li>yum install ruby</li><li>yum install rubygems</li></ul></li><li><p>安装ruby脚本运行使用的包。</p><ul><li>将redis-3.0.0和redis-3.0.0.gem放在一起然后执行</li><li>gem install redis-3.0.0.gem</li></ul></li><li><p>搭建步骤:需要6个redis实例。需要运行在不同的端口7001-7006</p></li></ul></li><li><p>第一步：创建6个redis实例，每个实例运行在不同的端口。</p><ul><li>如果你的节点中包含了appendonly.aof和dump.rdb请删除了，保证节点的干净</li><li>需要修改redis.conf配置文件。配置文件中还需要把cluster-enabled yes前的注释去掉。</li><li>同时修改port为7001</li><li>cp redis/bin /usr/java/redis-cluster/redis07 -r将之前安装好的bin目录一个一个复制到redis-cluster中</li></ul></li></ul><figure><img src="https://290ff162.telegraph-image-eg9.pages.dev/file/5a73634ac3215338bd49b.png" alt="图片7.png" tabindex="0"><figcaption>图片7.png</figcaption></figure><ul><li>第二步：启动每个redis实例。 <ul><li>在redis-cluster目录下创建start-all.sh执行vim start</li><li>然后i写入</li></ul></li></ul><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>	cd redis01
	./redis-server redis.conf
	cd ..
	cd redis02
	./redis-server redis.conf
	cd ..
	cd redis03
	./redis-server redis.conf
	cd ..
	cd redis04
	./redis-server redis.conf
	cd ..
	cd redis05
	./redis-server redis.conf
	cd ..
	cd redis06
	./redis-server redis.conf
	cd ..
	然后esc，然后：wq退出
	执行chmod u+x start-all.sh授权
	执行./start-all.sh开启所有redis实例
	执行ps aux|grep redis查看所有节点进程看是否成功
	在redis源码的src在有一个文件叫redis-trib.rb
	将它复制到/usr/java/redis-cluster目录下
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>第三步：使用ruby脚本搭建集群。 <ul><li>将它复制到/usr/java/redis-cluster目录下执行</li></ul></li></ul><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>	./redis-trib.rb create --replicas 1 192.168.25.153:7001 192.168.25.153:7002 192.168.25.153:7003 192.168.25.153:7004 192.168.25.153:7005 192.168.25.153:7006
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>这个不要随便乱用！否则要关闭redis所有的节点，然后将每个节点下aof、rdb、nodes.conf本地备份文件删除； 重启所有节点，然后重新执行脚本！ <ul><li>创建关闭集群的脚本：</li></ul></li></ul><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>[root@localhost redis-cluster]# vim shutdow-all.sh
redis01/redis-cli -p 7001 shutdown
redis01/redis-cli -p 7002 shutdown
redis01/redis-cli -p 7003 shutdown
redis01/redis-cli -p 7004 shutdown
redis01/redis-cli -p 7005 shutdown
redis01/redis-cli -p 7006 shutdown
[root@localhost redis-cluster]# chmod u+x shutdow-all.sh 

集群的使用方法
Redis-cli连接集群。[root@localhost redis-cluster]# redis01/redis-cli -p 7002 -c  -c：代表连接的是redis集群
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_12-java连接则用jedis" tabindex="-1"><a class="header-anchor" href="#_12-java连接则用jedis"><span>12. java连接则用jedis</span></a></h1>`,31),r=[a];function n(t,c){return e(),s("div",null,r)}const p=i(d,[["render",n],["__file","redis.html.vue"]]),h=JSON.parse('{"path":"/backend/database/redis.html","title":"redis","lang":"zh-CN","frontmatter":{"title":"redis","date":"2023-01-01T00:00:00.000Z","tags":"redis","categories":"后端","description":"1. NoSQL介绍 2. NoSQL产生原因 3. NoSQL的特点 4. redis介绍 5. Redis数据库 6. 消息订阅与发布 7. 事务 8. 安装与启动 9. jedis的操作 10. redis单机安装 11. Redis集群的搭建 12. java连接则用jedis 1. NoSQL介绍 关系型数据库是基于关系表的数据库，最终会将数...","head":[["meta",{"property":"og:url","content":"https://javaguide.cn/backend/database/redis.html"}],["meta",{"property":"og:site_name","content":"JavaGuide"}],["meta",{"property":"og:title","content":"redis"}],["meta",{"property":"og:description","content":"1. NoSQL介绍 2. NoSQL产生原因 3. NoSQL的特点 4. redis介绍 5. Redis数据库 6. 消息订阅与发布 7. 事务 8. 安装与启动 9. jedis的操作 10. redis单机安装 11. Redis集群的搭建 12. java连接则用jedis 1. NoSQL介绍 关系型数据库是基于关系表的数据库，最终会将数..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://290ff162.telegraph-image-eg9.pages.dev/file/28327364030668f3c4d44.jpg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-12-07T01:56:33.000Z"}],["meta",{"property":"article:author","content":"HeChuangJun"}],["meta",{"property":"article:published_time","content":"2023-01-01T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-07T01:56:33.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"redis\\",\\"image\\":[\\"https://290ff162.telegraph-image-eg9.pages.dev/file/28327364030668f3c4d44.jpg\\",\\"https://290ff162.telegraph-image-eg9.pages.dev/file/cc1727548496fd141234c.png\\",\\"https://290ff162.telegraph-image-eg9.pages.dev/file/5a73634ac3215338bd49b.png\\"],\\"datePublished\\":\\"2023-01-01T00:00:00.000Z\\",\\"dateModified\\":\\"2024-12-07T01:56:33.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"HeChuangJun\\",\\"url\\":\\"https://javaguide.cn/article/\\"}]}"]]},"headers":[],"git":{"createdTime":1733536593000,"updatedTime":1733536593000,"contributors":[{"name":"HeChuangJun","email":"1105128664@qq.com","commits":1}]},"readingTime":{"minutes":4.89,"words":1468},"filePathRelative":"backend/database/redis.md","localizedDate":"2023年1月1日","excerpt":"<!-- TOC -->\\n<ul>\\n<li><a href=\\"#1-nosql%E4%BB%8B%E7%BB%8D\\">1. NoSQL介绍</a></li>\\n<li><a href=\\"#2-nosql%E4%BA%A7%E7%94%9F%E5%8E%9F%E5%9B%A0\\">2. NoSQL产生原因</a></li>\\n<li><a href=\\"#3-nosql%E7%9A%84%E7%89%B9%E7%82%B9\\">3. NoSQL的特点</a></li>\\n<li><a href=\\"#4-redis%E4%BB%8B%E7%BB%8D\\">4. redis介绍</a></li>\\n<li><a href=\\"#5-redis%E6%95%B0%E6%8D%AE%E5%BA%93\\">5. Redis数据库</a></li>\\n<li><a href=\\"#6-%E6%B6%88%E6%81%AF%E8%AE%A2%E9%98%85%E4%B8%8E%E5%8F%91%E5%B8%83\\">6. 消息订阅与发布</a></li>\\n<li><a href=\\"#7-%E4%BA%8B%E5%8A%A1\\">7. 事务</a></li>\\n<li><a href=\\"#8-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%90%AF%E5%8A%A8\\">8. 安装与启动</a></li>\\n<li><a href=\\"#9-jedis%E7%9A%84%E6%93%8D%E4%BD%9C\\">9. jedis的操作</a></li>\\n<li><a href=\\"#10-redis%E5%8D%95%E6%9C%BA%E5%AE%89%E8%A3%85\\">10. redis单机安装</a></li>\\n<li><a href=\\"#11-redis%E9%9B%86%E7%BE%A4%E7%9A%84%E6%90%AD%E5%BB%BA\\">11. Redis集群的搭建</a></li>\\n<li><a href=\\"#12-java%E8%BF%9E%E6%8E%A5%E5%88%99%E7%94%A8jedis\\">12. java连接则用jedis</a></li>\\n</ul>","autoDesc":true}');export{p as comp,h as data};
